<div class="modal-header">
  <h5 class="modal-title">Editar Pessoa</h5>
  <button type="button" class="btn-close" (click)="onCancel()"></button>
</div>

<form [formGroup]="editForm" (ngSubmit)="onSubmit()">
  <div class="modal-body">
    <div class="row">
      <div class="col-md-6">
        <div class="mb-3">
          <label for="nome" class="form-label">Nome Completo *</label>
          <input
            type="text"
            class="form-control"
            id="nome"
            formControlName="nome"
            [class.is-invalid]="
              editForm.get('nome')?.invalid && editForm.get('nome')?.touched
            "
            placeholder="Digite o nome completo"
          />
          <div
            class="invalid-feedback"
            *ngIf="
              editForm.get('nome')?.invalid && editForm.get('nome')?.touched
            "
          >
            {{ getErrorMessage("nome") }}
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="mb-3">
          <label for="cpf" class="form-label">CPF *</label>
          <input
            type="text"
            class="form-control"
            id="cpf"
            formControlName="cpf"
            [class.is-invalid]="
              editForm.get('cpf')?.invalid && editForm.get('cpf')?.touched
            "
            placeholder="000.000.000-00"
            (input)="onCpfInput($event)"
          />
          <div
            class="invalid-feedback"
            *ngIf="editForm.get('cpf')?.invalid && editForm.get('cpf')?.touched"
          >
            {{ getErrorMessage("cpf") }}
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <div class="mb-3">
          <label for="sexo" class="form-label">Sexo *</label>
          <select
            class="form-select"
            id="sexo"
            formControlName="sexo"
            [class.is-invalid]="
              editForm.get('sexo')?.invalid && editForm.get('sexo')?.touched
            "
          >
            <option value="">Selecione o sexo</option>
            <option *ngFor="let option of sexoOptions" [value]="option.value">
              {{ option.label }}
            </option>
          </select>
          <div
            class="invalid-feedback"
            *ngIf="
              editForm.get('sexo')?.invalid && editForm.get('sexo')?.touched
            "
          >
            {{ getErrorMessage("sexo") }}
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="mb-3">
          <label for="email" class="form-label">Email *</label>
          <input
            type="email"
            class="form-control"
            id="email"
            formControlName="email"
            [class.is-invalid]="
              editForm.get('email')?.invalid && editForm.get('email')?.touched
            "
            placeholder="exemplo@email.com"
          />
          <div
            class="invalid-feedback"
            *ngIf="
              editForm.get('email')?.invalid && editForm.get('email')?.touched
            "
          >
            {{ getErrorMessage("email") }}
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <div class="mb-3">
          <label for="telefone" class="form-label">Telefone *</label>
          <input
            type="text"
            class="form-control"
            id="telefone"
            formControlName="telefone"
            [class.is-invalid]="
              editForm.get('telefone')?.invalid &&
              editForm.get('telefone')?.touched
            "
            placeholder="(11) 99999-9999"
            (input)="onTelefoneInput($event)"
          />
          <div
            class="invalid-feedback"
            *ngIf="
              editForm.get('telefone')?.invalid &&
              editForm.get('telefone')?.touched
            "
          >
            {{ getErrorMessage("telefone") }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="onCancel()">
      Cancelar
    </button>
    <button
      type="submit"
      class="btn btn-app"
      [disabled]="!editForm.valid || isSubmitting"
    >
      <span
        *ngIf="isSubmitting"
        class="spinner-border spinner-border-sm me-2"
      ></span>
      {{ isSubmitting ? "Salvando..." : "Salvar Alterações" }}
    </button>
  </div>
</form>
